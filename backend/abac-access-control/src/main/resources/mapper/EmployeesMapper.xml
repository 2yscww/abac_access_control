<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.xie.platform.mapper.EmployeesMapper">

    <!-- 根据员工名查询 -->
    <select id="selectByEmployeeName" resultType="com.xie.platform.model.Employees">
        SELECT
            employee_id,
            employee_name,
            dept_id,
            branch_id,
            level,
            current_projects,
            is_contractor,
            status,
            password,
            must_change_password,
            created_at,
            updated_at
        FROM employees
        WHERE employee_name = #{employeeName}
    </select>

    <!-- ? 根据 ID 查询 -->
    <select id="selectByEmployeeId" resultType="com.xie.platform.model.Employees">
        SELECT
            employee_id,
            employee_name,
            dept_id,
            branch_id,
            level,
            current_projects,
            is_contractor,
            status,
            password,
            must_change_password,
            created_at,
            updated_at
        FROM employees
        WHERE employee_id = #{employeeId}
    </select>

    <!-- 修改密码 -->
    <update id="updatePassword">
        UPDATE employees
        SET
            password = #{password},
            must_change_password = FALSE
            <!-- updated_at = NOW() -->
        WHERE employee_id = #{employeeId}
    </update>

</mapper>